<!-- Admin round control partial â€” swapped via SSE -->
<div class="flex items-center gap-4 mb-3">
  <span class="text-sm font-medium">
    {% if state.status.value == 'pre-event' %}
      Pre-Event â€” No rounds started
    {% elif state.status.value == 'round-active' %}
      Round {{ state.round_number }} in progress
    {% else %}
      Between rounds ({{ state.round_number }} completed)
    {% endif %}
  </span>
  <span class="text-2xl font-mono font-bold" id="timer-display">--:--</span>
</div>

<div class="flex flex-wrap gap-3 mb-4">
  <button
    hx-post="/api/admin/advance-round"
    hx-confirm="Start Round {{ state.round_number + 1 }}? {{ counts.active }} attendees in pool."
    hx-swap="none"
    class="bg-green-600 text-white px-4 py-2 rounded font-medium hover:bg-green-700 disabled:opacity-50"
    {% if state.rounds_remaining <= 0 %}disabled{% endif %}
  >
    Start Round {{ state.round_number + 1 }}
  </button>

  {% if state.status.value == 'round-active' and not state.timer_paused %}
  <button
    hx-post="/api/admin/pause"
    hx-vals='{"action": "pause"}'
    hx-swap="none"
    class="bg-yellow-500 text-white px-4 py-2 rounded font-medium hover:bg-yellow-600"
  >
    Pause Timer
  </button>
  {% elif state.timer_paused %}
  <button
    hx-post="/api/admin/pause"
    hx-vals='{"action": "resume"}'
    hx-swap="none"
    class="bg-blue-500 text-white px-4 py-2 rounded font-medium hover:bg-blue-600"
  >
    Resume Timer
  </button>
  {% endif %}

  {% if state.round_number > 0 %}
  <button
    hx-post="/api/admin/undo-round"
    hx-confirm="Undo Round {{ state.round_number }}? This will roll back pairings and restore the previous round."
    hx-swap="none"
    class="bg-red-100 text-red-700 px-4 py-2 rounded font-medium hover:bg-red-200"
  >
    Undo Round {{ state.round_number }}
  </button>
  {% endif %}
</div>
