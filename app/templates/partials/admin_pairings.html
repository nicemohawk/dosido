<!-- Admin pairings partial — swapped via SSE -->
{% if pairings %}
<h2 class="text-lg font-semibold mb-3">Current Pairings — Round {{ state.round_number }}</h2>

<div class="space-y-2 text-sm">
  {% for p in pairings %}
  <div class="flex items-center justify-between px-3 py-2 bg-gray-50 rounded">
    <span>
      <span class="font-medium text-gray-500">Table {{ p.table_number }}:</span>
      {{ p.name_a }} ↔ {{ p.name_b }}
    </span>
    <span class="text-gray-400">score: {{ p.score }}</span>
  </div>
  {% endfor %}

  {% if pit_stop_name %}
  <div class="px-3 py-2 bg-yellow-50 rounded text-yellow-700">
    Pit stop: {{ pit_stop_name }}
  </div>
  {% endif %}
</div>

<div class="mt-3 text-xs text-gray-400">
  Avg score: {{ "%.1f"|format(pairings|map(attribute='score')|list|sum / pairings|length) }}
</div>

<!-- Swap override -->
<div class="mt-4 pt-4 border-t">
  <h3 class="text-sm font-semibold mb-1">Swap Override</h3>
  <p class="text-gray-400 text-xs mb-2">Use if two matched attendees already know each other well.</p>
  <form hx-post="/api/admin/swap" hx-swap="none" class="flex flex-wrap items-center gap-3 text-sm">
    <select name="attendee_id_1" class="border rounded px-3 py-2">
      <option value="">Select attendee...</option>
      {% for id, att in attendees.items()|sort(attribute='1.name') %}
        {% if att.status.value == 'checked-in' %}
        <option value="{{ id }}">{{ att.name }}</option>
        {% endif %}
      {% endfor %}
    </select>
    <span class="text-gray-400">↔</span>
    <select name="attendee_id_2" class="border rounded px-3 py-2">
      <option value="">Select attendee...</option>
      {% for id, att in attendees.items()|sort(attribute='1.name') %}
        {% if att.status.value == 'checked-in' %}
        <option value="{{ id }}">{{ att.name }}</option>
        {% endif %}
      {% endfor %}
    </select>
    <button type="submit" class="bg-orange-500 text-white px-4 py-2 rounded font-medium hover:bg-orange-600">
      Apply Swap
    </button>
  </form>
</div>
{% else %}
<p class="text-gray-400 text-sm">No pairings yet — start a round to see matches.</p>
{% endif %}
